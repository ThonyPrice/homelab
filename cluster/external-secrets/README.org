#+title: External Secrets

* Installation

1. Create ~external-secrets~ namespace: ~kubectl create namespace external-secrets~
2. Create and configure service account according to this guide, https://external-secrets.io/latest/provider/google-secrets-manager/#gcp-service-account-authentication
3. Copy secret template: ~cp templates/gcpsm-secret.template.yaml /tmp/gcpsm-secret.yaml~
4. Add the generated SA key to the secret: ~cat ~/Downloads/homelab-439906-6178eb616578.json >> /tmp/gcpsm-secret.yaml~ (*N.B.* check/fix yaml indentation)
5. Apply the secret manifest: ~kubectl apply -f tmp/gcpsm-secret.yaml -n external-secrets~
6. Now, apply the chart: ~helm template homelab/cluster/external-secrets | ~kubectl apply -f -n external-secrets~
